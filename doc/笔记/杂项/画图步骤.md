
## 一、高效绘图四步流程（推荐）

### ✅ Step 1：**先画逻辑分层，再填组件**
不要一上来就拖图标！先用**矩形框划分区域**，明确层次：
```text
[客户端层]
[接入层]
[服务层]
[中间件/存储层]
[外部平台层]
```
> 💡 在 draw.io 中：使用 **“Arrange > Insert > Container”** 或直接用带标题的矩形（右键 → “Edit Style” → 勾选 `container=1`）

### ✅ Step 2：**统一图形语义（见下文常用图形表）**
- 服务 = 圆角矩形
- 存储 = 圆柱体
- 网关 = 路由器图标 或 黑色矩形
- 客户端 = 人形图标 或 浏览器图标
- 消息队列 = 圆柱+箭头 或 Kafka 官方图标

### ✅ Step 3：**用颜色/边框表达状态（关键！）**
| 状态       | 填充色（HEX） | 边框色 | 字体 | 说明 |
|------------|---------------|--------|------|------|
| **已成熟**   | `#E8F5E9`     | `#4CAF50` | 黑色 | 绿色系，稳定运行 |
| **建设中**   | `#E3F2FD`     | `#2196F3` | 黑色 | 蓝色系，开发中 |
| **待建设**   | `#FFF8E1`     | `#FF9800` | 黑色 | 橙色系，规划中 |
| **外部依赖** | `#F5F5F5`     | `#9E9E9E` | 灰色 | 灰色系，非自建 |

> 💡 **操作技巧**：
> 1. 先定义好 4 个“样式模板”（右键任意图形 → “Set as Default Style”）
> 2. 后续直接复制粘贴模板图形，修改文字即可，**避免手动调色**

### ✅ Step 4：**连接线标注 + 对齐布局**
- 连接线文字：双击连线输入（如 “上传请求”、“元数据同步”）
- 使用 **“Arrange > Layout”** 自动对齐（推荐 **Hierarchical - Top to Bottom**）
- 开启 **View > Grid** 和 **View > Guides** 辅助对齐

---

## 二、常用图形推荐（文件服务场景）

| 元素类型       | 推荐图形位置（draw.io 库） | 说明 |
|----------------|---------------------------|------|
| **微服务**      | `General > Rounded Rectangle` | 圆角矩形，标准服务表示 |
| **API 网关**    | `Network > Router` 或 `AWS > API Gateway` | 若用 AWS 风格；否则用黑色矩形 |
| **客户端**      | `General > User` 或 `Web > Browser` | 用户或 Web 前端 |
| **对象存储**    | `AWS > S3` 或 `Azure > Blob Storage` | 即使非 AWS，S3 图标已成行业通用 |
| **数据库**      | `Database > Cylinder` | 圆柱体 |
| **消息队列**    | `AWS > SQS` 或 `Azure > Event Hubs` | 或自定义：圆柱+循环箭头 |
| **CDN**         | `Network > Cloud` + 标注 “CDN” | 云朵图标 |
| **定时任务**    | `General > Clock` | 表示归档/清理等定时作业 |

> 🔍 **提示**：在左侧搜索框直接搜关键词（如 “storage”, “kafka”），比手动翻库快 10 倍！

---

## 三、清晰表达“状态”与“层次”的技巧

### 🎯 技巧 1：**状态标签（比纯颜色更直观）**
在服务图形**右上角**加小标签：
- ✅ 已成熟
- 🟢 建设中
- 🟡 待建设

> **操作**：用小号文本框（字体 8pt）叠加在图形上，组合（Ctrl+G）成一体

### 🎯 技巧 2：**分层容器 + 背景色**
- 每层容器设置**浅灰背景**（如 `#FAFAFA`）
- 层标题用**加粗字体 + 分隔线**

### 🎯 技巧 3：**虚线框表示“逻辑分组”**
例如：将“双云存储”用虚线框圈起来，标注 “多云存储层”

### 🎯 技巧 4：**图例（Legend）必不可少**
在图右下角加一个图例框：
```text
[图例]
🟢 已成熟  🟢 建设中  🟡 待建设
─── 同步调用   - - - > 异步事件
```

---

## 四、效率工具与快捷键

| 操作 | 快捷键 / 技巧 |
|------|--------------|
| **复制样式** | 选中图形 → Ctrl+Shift+C → 点新图形 → Ctrl+Shift+V |
| **批量改色** | 框选多个 → 右侧面板统一改填充/边框 |
| **自动连线** | 拖拽时按住 **Shift** 可直角连线 |
| **导出高清图** | File > Export as > PNG（勾选 “Include a copy of my diagram” 便于后续编辑） |
| **模板复用** | 将常用图形保存到 “Scratchpad”（左侧底部） |

---

## 五、示例：你的当前架构图结构建议

```text
[客户端层]
  ├─ 业务系统 (User icon)
  └─ Java SDK (Rounded Rect, 🟡 待建设)

[接入层]
  └─ FileUpload Gateway (Router icon, ✅ 已成熟)

[服务层]
  ├─ FileUpload Service (Rounded Rect, ✅ 已成熟)
  │    └─ [内嵌] 文件处理逻辑 (Pink box, ⚠️ 耦合)
  ├─ FileAccess Service (✅)
  ├─ FileSync Service (✅)
  └─ BizService (✅)

[存储层]
  ├─ COS (S3 icon, ✅)
  └─ OBS (Blob icon, ✅)

[外部]
  └─ CDN (Cloud icon)
```

> 按此结构，10 分钟内可完成专业级架构图。

---

## 六、额外建议

- **命名规范**：服务名用 `PascalCase`（如 `FileUploadService`），避免空格
- **避免交叉线**：用 “Orthogonal” 连线风格（右键连线 → “Style” → `orthogonal`）
- **版本管理**：将 `.drawio` 文件存入 Git，便于协作与历史追溯

---

按照这套方法，你不仅能**快速画出清晰架构图**，还能让读者**一眼看懂系统状态与演进方向**。如果需要，我可以提供一个 **draw.io 模板文件（.drawio）**，包含预设颜色、图形和分层容器，直接套用即可。